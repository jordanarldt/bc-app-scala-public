(this["webpackJsonpbc-sample-app-scala"]=this["webpackJsonpbc-sample-app-scala"]||[]).push([[0],{111:function(e,t,n){},112:function(e,t,n){"use strict";n.r(t);var r=n(30),a=n(0),c=n.n(a),i=n(18),o=n.n(i),s=n(152),l=n(54),u=n(2),d=n(42),j=n(8),h=n(150),b=n(151),p=n(7);var O,m,g,x,v,f=n(3),y=Object(a.createContext)(""),w=function(e){var t=e.children,n=Object(d.c)(),r=Object(p.a)(n,1)[0],c=Object(a.useState)(""),i=Object(p.a)(c,2),o=i[0],s=i[1];return Object(a.useEffect)((function(){var e=r.get("context");e&&(s(e),function(e){var t;if("undefined"!==typeof window&&!document.getElementById("bc-sdk-js")){var n=document.getElementsByTagName("script")[0],r=document.createElement("script");r.id="bc-sdk-js",r.async=!0,r.src="https://cdn.bigcommerce.com/jssdk/bc-sdk.js",null===(t=n.parentNode)||void 0===t||t.insertBefore(r,n),window.bcAsyncInit=function(){Bigcommerce.init({onLogout:function(){return null}})}}}())}),[r]),Object(f.jsx)(y.Provider,{value:o,children:t})},S=function(){return Object(a.useContext)(y)},k=u.d.svg(O||(O=Object(r.a)(["\n  vertical-align: middle;\n  height: 1.5em;\n  width: 1.5em;\n"]))),C=function(){return Object(f.jsxs)(k,{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[Object(f.jsx)("g",{children:Object(f.jsx)("rect",{fill:"none",height:"24",width:"24"})}),Object(f.jsx)("g",{children:Object(f.jsx)("path",{d:"M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M15,14H9v-2h6V14z M20,7H4V4h16V7z"})})]})},P=u.d.svg(m||(m=Object(r.a)(["\n  vertical-align: middle;\n  height: 1.5em;\n  width: 1.5em;\n"]))),I=function(){return Object(f.jsxs)(P,{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[Object(f.jsx)("g",{children:Object(f.jsx)("path",{d:"M0,0h24v24H0V0z",fill:"none"})}),Object(f.jsx)("g",{children:Object(f.jsxs)("g",{children:[Object(f.jsx)("circle",{cx:"10",cy:"8",r:"4"}),Object(f.jsx)("path",{d:"M10.67,13.02C10.45,13.01,10.23,13,10,13c-2.42,0-4.68,0.67-6.61,1.82C2.51,15.34,2,16.32,2,17.35V20h9.26 C10.47,18.87,10,17.49,10,16C10,14.93,10.25,13.93,10.67,13.02z"}),Object(f.jsx)("path",{d:"M20.75,16c0-0.22-0.03-0.42-0.06-0.63l1.14-1.01l-1-1.73l-1.45,0.49c-0.32-0.27-0.68-0.48-1.08-0.63L18,11h-2l-0.3,1.49 c-0.4,0.15-0.76,0.36-1.08,0.63l-1.45-0.49l-1,1.73l1.14,1.01c-0.03,0.21-0.06,0.41-0.06,0.63s0.03,0.42,0.06,0.63l-1.14,1.01 l1,1.73l1.45-0.49c0.32,0.27,0.68,0.48,1.08,0.63L16,21h2l0.3-1.49c0.4-0.15,0.76-0.36,1.08-0.63l1.45,0.49l1-1.73l-1.14-1.01 C20.72,16.42,20.75,16.22,20.75,16z M17,18c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S18.1,18,17,18z"})]})})]})},T=n(114),L=function(e){var t=e.routes;return Object(f.jsx)(E,{children:t.map((function(e,t){return Object(f.jsx)(A,{route:e},"nav-menu-item-".concat(t))}))})},A=function(e){var t=e.route;return Object(f.jsx)(B,{children:Object(f.jsxs)(V,{to:t.path,children:[t.icon,t.name]})})},E=u.d.ul(g||(g=Object(r.a)(["\n  padding-left: 0;\n"]))),B=u.d.li(x||(x=Object(r.a)(["\n  display: inline-block;\n  margin: 0 0.5em;\n"]))),V=Object(u.d)(d.b)(v||(v=Object(r.a)(["\n  display: block;\n  font-weight: bold;\n  padding: 0.5em 1em;\n  border-radius: 0.75em;\n  text-decoration: none;\n  transition: 100ms;\n  background-color: ",";\n\n  &.active {\n    color: white;\n    background-color: ",";\n    box-shadow: 0px 4px 8px ",";\n  }\n\n  &:not(.active):hover {\n    color: ",";\n    background-color: ",";\n  }\n\n  & svg {\n    margin-right: 0.25em;\n  }\n"])),(function(e){return e.theme.colors.primary20}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary30}),(function(e){return e.theme.colors.primary30}),(function(e){return e.theme.colors.primary20})),z=function(e){var t=e.navRoutes;return Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(T.a,{children:"Sample BigCommerce App with Scala/React"}),Object(f.jsx)(L,{routes:t})]})},F=n(165),U=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{header:"Getting Started",children:Object(f.jsx)(T.i,{children:"Welcome! This page is where you could put any helpful info to introduce users to the flow of your application. This example app will demonstrate basic API functionality such as fetching product information, updating product inventory, and permissions-based user roles."})}),Object(f.jsx)(F.a,{header:"Why Scala?",children:Object(f.jsx)(T.i,{children:"Scala is not a new language by any means, but it has been gaining popularity in the last few years. Scala is a great language for building backend services and web applications that are scalable and performant due to its strong type system and functional programming features."})}),Object(f.jsx)(F.a,{header:"Technology Stack",children:Object(f.jsxs)(T.i,{children:["This example app is built with ",Object(f.jsx)("strong",{children:"Scala"})," for the back-end, ",Object(f.jsx)("strong",{children:"ReactJS"})," for the front-end, and ",Object(f.jsx)("strong",{children:"PostgreSQL"})," for the database."]})})]})},_=n(161),H=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{header:"Having trouble?",action:{variant:"secondary",text:"Contact Support",onClick:function(){}},children:Object(f.jsx)(T.i,{children:"This is the help page. This is where you would want to put troubleshooting steps and helpful information for your app users."})}),Object(f.jsxs)(F.a,{header:"Frequently Asked Questions",children:[Object(f.jsx)(T.i,{children:"This is the FAQ page. This is where you would want to put frequently asked questions for your app users."}),Object(f.jsx)("div",{children:Object(f.jsx)(_.a,{title:"Will this app give me superpowers?",children:Object(f.jsx)(T.i,{children:"Probably not, but the app will help you manage your BigCommerce store."})})}),Object(f.jsx)("div",{children:Object(f.jsxs)(_.a,{title:"Why am I getting an error?",children:[Object(f.jsx)(T.i,{children:"If you're getting an error, you're likely doing something incorrectly. Here are the steps on how to do it correctly:"}),Object(f.jsxs)("ol",{children:[Object(f.jsx)("li",{children:Object(f.jsx)(T.i,{as:"span",children:"Do this thing"})}),Object(f.jsx)("li",{children:Object(f.jsx)(T.i,{as:"span",children:"And then this thing"})}),Object(f.jsx)("li",{children:Object(f.jsx)(T.i,{as:"span",children:"And make sure of this"})}),Object(f.jsx)("li",{children:Object(f.jsx)(T.i,{as:"span",children:"And then it should work"})})]})]})})]})]})},M=n(166),R=n(171),N=n(160),q=n(153),J=n(167),W=n(65),K=n(168),Q=function(e){var t=e.defaultValue,n=e.onSearchSubmit,r=Object(a.useState)(""),c=Object(p.a)(r,2),i=c[0],o=c[1];Object(a.useEffect)((function(){o(t)}),[t]);return Object(f.jsx)(J.a,{marginBottom:"medium",children:Object(f.jsx)(K.a,{value:i,onChange:function(e){o(e.target.value)},onSubmit:function(){n(i)}})})},D=n(26),G=n(29),Y=n(56);function X(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(G.a)(Object(D.a)().mark((function e(t,n){var r,a,c,i;return Object(D.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("").concat(t,"?").concat(n));case 2:if((r=e.sent).ok){e.next=11;break}return e.next=6,r.json();case 6:throw a=e.sent,c=a.message,(i=new Error(c)).status=r.status,i;case 11:return e.abrupt("return",r.json());case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){var e=S(),t=new URLSearchParams({context:e}).toString(),n=Object(Y.a)(e?["/api/users/role",t]:null,X);return{data:n.data,error:n.error}}function ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=S(),a=new URLSearchParams({context:r,page:String(e),limit:String(t),search:n}).toString(),c=Object(Y.a)(r?["/api/users",a]:null,X),i=c.data,o=c.error;return{users:null===i||void 0===i?void 0:i.data,pagination:null===i||void 0===i?void 0:i.pagination,isLoading:!i&&!o,error:o}}function te(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=S(),a=new URLSearchParams({context:r,page:String(e),limit:String(t),like:n}).toString(),c=Object(Y.a)(r?["/api/variants",a]:null,X),i=c.data,o=c.error,s=c.mutate;return{variants:null===i||void 0===i?void 0:i.data,meta:null===i||void 0===i?void 0:i.meta,isLoading:!i&&!o,error:o,mutate:s}}var ne=n(33),re=n(169),ae=n(162),ce=n(156),ie=n(159),oe=n(170),se=function(){var e=Object(G.a)(Object(D.a)().mark((function e(t,n,r){var a,c,i,o;return Object(D.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("").concat(t),{method:n,headers:{"Content-Type":"application/json"},body:r?JSON.stringify(r):null});case 2:if((a=e.sent).ok){e.next=11;break}return e.next=6,a.json();case 6:throw c=e.sent,i=c.message,(o=new Error(i)).status=a.status,o;case 11:return e.abrupt("return",a.json().catch((function(){})));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function le(e,t,n){return se("/api/users?context=".concat(n),"PUT",{userId:e,role:t})}function ue(e,t,n,r,a){var c={variantId:e,productId:t,trackingType:n,inventoryCount:r};return se("/api/variants?context=".concat(a),"PUT",c)}var de=n(155),je=function(e){var t=e.message;return Object(f.jsx)(de.a,{type:"error",header:"Error",messages:[{text:t}]})},he=function(e){var t=e.id,n=e.sku,r=e.productId,c=e.trackingType,i=e.inventoryCount,o=e.context,s=e.closeModal,l=e.onSuccess,u=Object(a.useState)(i),d=Object(p.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(c),O=Object(p.a)(b,2),m=O[0],g=O[1],x=Object(a.useState)(!1),v=Object(p.a)(x,2),y=v[0],w=v[1],S=Object(a.useState)(!1),k=Object(p.a)(S,2),C=k[0],P=k[1],I=function(){var e=Object(G.a)(Object(D.a)().mark((function e(){var n;return Object(D.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(m===c&&j===i){e.next=17;break}return w(!0),n=m!==c?m:null,e.prev=3,e.next=6,ue(t,r,n,j,o);case 6:w(!1),l(),s(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(3),w(!1),P(!0);case 15:e.next=18;break;case 17:s();case 18:case"end":return e.stop()}}),e,null,[[3,11]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsx)(re.a,{actions:[{text:"Cancel",variant:"subtle",onClick:s},{text:"Save",onClick:I}],header:"Editing SKU: ".concat(n),isOpen:!0,onClose:s,closeOnEscKey:!0,closeOnClickOutside:!0,children:y?Object(f.jsx)(M.a,{justifyContent:"center",children:Object(f.jsx)(R.a,{children:Object(f.jsx)(N.a,{size:"medium"})})}):Object(f.jsxs)(ae.a,{marginBottom:"xSmall",children:[Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(ie.a,{label:"Inventory Count",value:j,min:0,max:1e6,maxLength:7,onCountChange:h,required:!0}),Object(f.jsx)(oe.a,{filterable:!1,label:"Inventory Tracking Type",options:[{value:"product",content:"Product"},{value:"variant",content:"Variant"},{value:"none",content:"None"}],value:m,onOptionChange:g,required:!0})]}),C&&Object(f.jsx)(je,{message:"Failed to update the variant. Please try again."})]})})};var be=function(){var e,t,n=S(),r=$(),c=Object(a.useState)(1),i=Object(p.a)(c,2),s=i[0],l=i[1],u=Object(a.useState)(50),d=Object(p.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(""),O=Object(p.a)(b,2),m=O[0],g=O[1],x=te(s,j,m),v=x.variants,y=x.meta,w=x.isLoading,k=x.error,C=x.mutate,P=Object(a.useState)(v),I=Object(p.a)(P,2),L=I[0],A=I[1],E=Object(a.useState)(""),B=Object(p.a)(E,2),V=B[0],z=B[1],F=Object(a.useState)("ASC"),U=Object(p.a)(F,2),_=U[0],H=U[1],K=null===L||void 0===L?void 0:L.sort((function(e,t){return"inventory_level"===V?"ASC"===_?e[V]-t[V]:t[V]-e[V]:"ASC"===_?e.sku.localeCompare(t.sku):t.sku.localeCompare(e.sku)}));return Object(a.useEffect)((function(){return A(v)}),[v]),n?w?Object(f.jsx)(M.a,{justifyContent:"center",children:Object(f.jsx)(R.a,{children:Object(f.jsx)(N.a,{size:"medium"})})}):r.error||k?Object(f.jsx)(je,{message:"Failed to authorize the request for the variants data. Please try reloading or reinstalling the app."}):null!==v&&void 0!==v&&v.length||w||m?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Q,{defaultValue:m,onSearchSubmit:function(e){return g(e)}}),Object(f.jsx)(q.a,{emptyComponent:Object(f.jsx)(J.a,{padding:"medium",children:Object(f.jsx)(T.i,{children:"No results!"})}),columns:[{header:"Product Name",hash:"product_name",render:function(e){return e.product_name},isSortable:!1},{header:"Tracking Type",hash:"inventory_tracking",render:function(e){return e.inventory_tracking},isSortable:!1},{header:"SKU",hash:"sku",render:function(e){return e.sku},isSortable:!0},{header:"Inventory Count",hash:"inventory_level",render:function(e){return e.inventory_level},isSortable:!0},{header:"Action",hideHeader:!0,hash:"action",render:function(e){var t=e.id,a=e.sku,c=e.product_id,i=e.inventory_tracking,s=e.inventory_level;return Object(f.jsx)(W.a,{variant:"subtle",onClick:function(){return function(e,t,n,r,a,c,i){var s={id:e,sku:t,productId:n,trackingType:r,inventoryCount:a,context:c,onSuccess:i},l=document.createElement("div");l.id="modal";var u=document.body.appendChild(l);o.a.render(Object(f.jsx)(he,Object(ne.a)({closeModal:function(){o.a.unmountComponentAtNode(u),u.remove()}},s)),u)}(t,a,c,i,s,n,C)},disabled:"viewer"===r.data.role,children:"Edit"})},isSortable:!1}],pagination:{currentPage:s,totalItems:null!==(e=null===(t=y.pagination)||void 0===t?void 0:t.total)&&void 0!==e?e:0,onPageChange:function(e){l(e),A(K)},itemsPerPageOptions:[50,100,200,250],onItemsPerPageChange:function(e){l(1),h(e)},itemsPerPage:j},items:null!==L&&void 0!==L?L:[],stickyHeader:!0,sortable:{columnHash:V,direction:_,onSort:function(e,t){z(e),H(t),A(K)}}}),s<(null===y||void 0===y?void 0:y.pagination.total_pages)&&Object(f.jsx)(pe,{targetPage:s+1,limit:j})]}):Object(f.jsx)(je,{message:"There are no variants to display. This indicates a problem, please try reloading the app."}):Object(f.jsx)(je,{message:"Failed to authorize your session. Please try reloading the app."})};function pe(e){return te(e.targetPage,e.limit),null}var Oe=function(){return Object(f.jsxs)(F.a,{header:"Inventory",children:[Object(f.jsx)(T.i,{children:"You can see all of your store's variants here, sort them, and update the inventory level."}),Object(f.jsx)(be,{})]})},me=function(e){var t=e.userId,n=e.role,r=e.currentUserRole,c=e.context,i=Object(a.useState)(n),o=Object(p.a)(i,2),s=o[0],l=o[1],u=function(){var e=Object(G.a)(Object(D.a)().mark((function e(r){return Object(D.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le(t,r,c);case 3:l(r),e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),l(n);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsx)(oe.a,{onOptionChange:u,options:[{value:"admin",content:"Admin"},{value:"viewer",content:"Viewer"}],filterable:!1,value:s,placeholder:"owner"===n?"Owner":void 0,disabled:"owner"===n||"viewer"===r})},ge=function(){var e,t=S(),n=$(),r=Object(a.useState)(1),c=Object(p.a)(r,2),i=c[0],o=c[1],s=Object(a.useState)(10),l=Object(p.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(""),h=Object(p.a)(j,2),b=h[0],O=h[1],m=ee(i,u,b),g=m.users,x=m.pagination,v=m.isLoading,y=m.error;return t?v?Object(f.jsx)(M.a,{justifyContent:"center",children:Object(f.jsx)(R.a,{children:Object(f.jsx)(N.a,{size:"medium"})})}):n.error||y?Object(f.jsx)(je,{message:"There was an error loading the users data. Please try again or reload the app."}):null!==g&&void 0!==g&&g.length||v||b?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(Q,{defaultValue:b,onSearchSubmit:function(e){return O(e)}}),Object(f.jsx)(q.a,{columns:[{header:"Email",hash:"email",render:function(e){return e.email}},{header:"Role",hash:"role",width:"200px",render:function(e){var r,a=e.role,c=e.userId;return Object(f.jsx)(me,{currentUserRole:null===(r=n.data)||void 0===r?void 0:r.role,role:a,userId:c,context:t})}},{header:"Last Login",hash:"lastLogin",render:function(e){var t=e.lastLogin;return new Date(1e3*t).toLocaleString()}}],pagination:{currentPage:i,totalItems:null!==(e=null===x||void 0===x?void 0:x.totalItems)&&void 0!==e?e:0,onPageChange:o,itemsPerPageOptions:[10,25,50,100],onItemsPerPageChange:function(e){o(1),d(e)},itemsPerPage:u},items:null!==g&&void 0!==g?g:[]}),i<(null===x||void 0===x?void 0:x.totalPages)&&Object(f.jsx)(xe,{targetPage:i+1,limit:u})]}):Object(f.jsx)(je,{message:"There are no users to display. This indicates a problem, please try reloading the app."}):Object(f.jsx)(je,{message:"Failed to authorize your session. Please try reloading the app."})};function xe(e){return ee(e.targetPage,e.limit),null}var ve=function(){return Object(f.jsxs)(F.a,{header:"Users",children:[Object(f.jsxs)(T.i,{children:["This is a list of users that are able to use this app on your store and their permissions. By default, when a user first loads the app after being given permissions, they will only have the ",Object(f.jsx)("strong",{children:"Viewer"})," role. If you want them to have ",Object(f.jsx)("strong",{children:"Admin"})," permissions, you must set that here."]}),Object(f.jsx)(ge,{})]})},fe=function(){return Object(f.jsx)(F.a,{header:"Not Found",children:Object(f.jsx)(T.i,{children:"Cannot find the page that you're looking for."})})},ye=[{name:"Getting Started",path:"/",icon:Object(f.jsx)(h.a,{}),element:Object(f.jsx)(U,{})},{name:"Inventory",path:"/inventory",icon:Object(f.jsx)(C,{}),element:Object(f.jsx)(Oe,{})},{name:"Users",path:"/users",icon:Object(f.jsx)(I,{}),element:Object(f.jsx)(ve,{})},{name:"Help",path:"/help",icon:Object(f.jsx)(b.a,{}),element:Object(f.jsx)(H,{})}];function we(){return Object(f.jsxs)(d.a,{children:[Object(f.jsx)(z,{navRoutes:ye}),Object(f.jsx)(w,{children:Object(f.jsxs)(j.c,{children:[ye.map((function(e,t){var n=e.path,r=e.element;return Object(f.jsx)(j.a,{path:n,element:r},"route-".concat(t))})),Object(f.jsx)(j.a,{path:"*",element:Object(f.jsx)(fe,{})})]})})]})}n(111);var Se,ke=Object(u.b)(Se||(Se=Object(r.a)(["\n  body {\n    height: 100%;\n    max-width: 1080px;\n    min-width: 600px;\n    margin: 2em auto;\n    background-color: ",";\n  }\n\n  #root {\n    padding: 1em;\n  }\n\n  a {\n    color: ",";\n  }\n\n  a:hover {\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.secondary10}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary30}));o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsxs)(u.a,{theme:l.a,children:[Object(f.jsx)(s.a,{}),Object(f.jsx)(ke,{}),Object(f.jsx)(we,{})]})}),document.getElementById("root"))}},[[112,1,2]]]);
//# sourceMappingURL=main.344d1178.chunk.js.map