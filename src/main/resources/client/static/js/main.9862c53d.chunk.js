(this["webpackJsonpbc-sample-app-scala"]=this["webpackJsonpbc-sample-app-scala"]||[]).push([[0],{107:function(e,t,n){},108:function(e,t,n){"use strict";n.r(t);var r=n(28),a=n(0),i=n.n(a),o=n(22),c=n.n(o),s=n(148),l=n(54),u=n(2),d=n(40),j=n(7),h=n(146),b=n(147),p=n(9);var m,O,g,x,v,f=n(3),y=Object(a.createContext)(""),w=function(e){var t=e.children,n=Object(d.c)(),r=Object(p.a)(n,1)[0],i=Object(a.useState)(""),o=Object(p.a)(i,2),c=o[0],s=o[1];return Object(a.useEffect)((function(){var e=r.get("context");e&&(s(e),function(e){var t;if("undefined"!==typeof window&&!document.getElementById("bc-sdk-js")){var n=document.getElementsByTagName("script")[0],r=document.createElement("script");r.id="bc-sdk-js",r.async=!0,r.src="https://cdn.bigcommerce.com/jssdk/bc-sdk.js",null===(t=n.parentNode)||void 0===t||t.insertBefore(r,n),window.bcAsyncInit=function(){Bigcommerce.init({onLogout:function(){return null}})}}}())}),[r]),Object(f.jsx)(y.Provider,{value:c,children:t})},S=function(){return Object(a.useContext)(y)},k=u.d.svg(m||(m=Object(r.a)(["\n  vertical-align: middle;\n  height: 1.5rem;\n  width: 1.5rem;\n"]))),C=function(){return Object(f.jsxs)(k,{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24px",viewBox:"0 0 24 24",width:"24px",fill:"currentColor",children:[Object(f.jsx)("g",{children:Object(f.jsx)("rect",{fill:"none",height:"24",width:"24"})}),Object(f.jsx)("g",{children:Object(f.jsx)("path",{d:"M20,2H4C3,2,2,2.9,2,4v3.01C2,7.73,2.43,8.35,3,8.7V20c0,1.1,1.1,2,2,2h14c0.9,0,2-0.9,2-2V8.7c0.57-0.35,1-0.97,1-1.69V4 C22,2.9,21,2,20,2z M15,14H9v-2h6V14z M20,7H4V4h16V7z"})})]})},P=u.d.svg(O||(O=Object(r.a)(["\n  vertical-align: middle;\n  height: 1.5rem;\n  width: 1.5rem;\n"]))),I=function(){return Object(f.jsxs)(P,{xmlns:"http://www.w3.org/2000/svg",enableBackground:"new 0 0 24 24",height:"24",viewBox:"0 0 24 24",width:"24",fill:"currentColor",children:[Object(f.jsx)("g",{children:Object(f.jsx)("path",{d:"M0,0h24v24H0V0z",fill:"none"})}),Object(f.jsx)("g",{children:Object(f.jsxs)("g",{children:[Object(f.jsx)("circle",{cx:"10",cy:"8",r:"4"}),Object(f.jsx)("path",{d:"M10.67,13.02C10.45,13.01,10.23,13,10,13c-2.42,0-4.68,0.67-6.61,1.82C2.51,15.34,2,16.32,2,17.35V20h9.26 C10.47,18.87,10,17.49,10,16C10,14.93,10.25,13.93,10.67,13.02z"}),Object(f.jsx)("path",{d:"M20.75,16c0-0.22-0.03-0.42-0.06-0.63l1.14-1.01l-1-1.73l-1.45,0.49c-0.32-0.27-0.68-0.48-1.08-0.63L18,11h-2l-0.3,1.49 c-0.4,0.15-0.76,0.36-1.08,0.63l-1.45-0.49l-1,1.73l1.14,1.01c-0.03,0.21-0.06,0.41-0.06,0.63s0.03,0.42,0.06,0.63l-1.14,1.01 l1,1.73l1.45-0.49c0.32,0.27,0.68,0.48,1.08,0.63L16,21h2l0.3-1.49c0.4-0.15,0.76-0.36,1.08-0.63l1.45,0.49l1-1.73l-1.14-1.01 C20.72,16.42,20.75,16.22,20.75,16z M17,18c-1.1,0-2-0.9-2-2s0.9-2,2-2s2,0.9,2,2S18.1,18,17,18z"})]})})]})},T=n(110),E=function(e){var t=e.routes;return Object(f.jsx)(A,{children:t.map((function(e,t){return Object(f.jsx)(L,{route:e},"nav-menu-item-".concat(t))}))})},L=function(e){var t=e.route;return Object(f.jsx)(B,{children:Object(f.jsxs)(V,{to:t.path,children:[t.icon,t.name]})})},A=u.d.ul(g||(g=Object(r.a)(["\n  padding-left: 0;\n"]))),B=u.d.li(x||(x=Object(r.a)(["\n  display: inline-block;\n  margin: 0 0.5em;\n"]))),V=Object(u.d)(d.b)(v||(v=Object(r.a)(["\n  display: block;\n  font-weight: bold;\n  padding: 0.5em 1em;\n  border-radius: 0.75em;\n  text-decoration: none;\n  transition: 100ms;\n  background-color: ",";\n\n  &.active {\n    color: white;\n    background-color: ",";\n    box-shadow: 0px 4px 8px ",";\n  }\n\n  &:not(.active):hover {\n    color: ",";\n    background-color: ",";\n  }\n\n  & svg {\n    margin-right: 0.25em;\n  }\n"])),(function(e){return e.theme.colors.primary20}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary30}),(function(e){return e.theme.colors.primary30}),(function(e){return e.theme.colors.primary20})),z=function(e){var t=e.navRoutes;return Object(f.jsxs)("div",{className:"header",children:[Object(f.jsx)(T.a,{children:"Sample BigCommerce App with Scala/React"}),Object(f.jsx)(E,{routes:t})]})},F=n(161),U=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{header:"Getting Started",children:Object(f.jsx)(T.i,{children:"Welcome! This page is where you could put any helpful info to introduce users to the flow of your application. This example app will demonstrate basic API functionality such as fetching product information, updating product inventory, and permissions-based user roles."})}),Object(f.jsx)(F.a,{header:"Why Scala?",children:Object(f.jsx)(T.i,{children:"Scala is not a new language by any means, but it has been gaining popularity in the last few years. Scala is a great language for building backend services and web applications that are scalable and performant due to its strong type system and functional programming features."})}),Object(f.jsx)(F.a,{header:"Technology Stack",children:Object(f.jsxs)(T.i,{children:["This example app is built with ",Object(f.jsx)("strong",{children:"Scala"})," for the back-end, ",Object(f.jsx)("strong",{children:"ReactJS"})," for the front-end, and ",Object(f.jsx)("strong",{children:"PostgreSQL"})," for the database."]})})]})},_=n(157),H=function(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{header:"Having trouble?",action:{variant:"secondary",text:"Contact Support",onClick:function(){}},children:Object(f.jsx)(T.i,{children:"This is the help page. This is where you would want to put troubleshooting steps and helpful information for your app users."})}),Object(f.jsxs)(F.a,{header:"Frequently Asked Questions",children:[Object(f.jsx)(T.i,{children:"This is the FAQ page. This is where you would want to put frequently asked questions for your app users."}),Object(f.jsx)("div",{children:Object(f.jsx)(_.a,{title:"Will this app give me superpowers?",children:Object(f.jsx)(T.i,{children:"Probably not, but the app will help you manage your BigCommerce store."})})}),Object(f.jsx)("div",{children:Object(f.jsxs)(_.a,{title:"Why am I getting an error?",children:[Object(f.jsx)(T.i,{children:"If you're getting an error, you're likely doing something incorrectly. Here are the steps on how to do it correctly:"}),Object(f.jsxs)("ol",{children:[Object(f.jsx)("li",{children:Object(f.jsx)(T.i,{as:"span",children:"Do this thing"})}),Object(f.jsx)("li",{children:Object(f.jsx)(T.i,{as:"span",children:"And then this thing"})}),Object(f.jsx)("li",{children:Object(f.jsx)(T.i,{as:"span",children:"And make sure of this"})}),Object(f.jsx)("li",{children:Object(f.jsx)(T.i,{as:"span",children:"And then it should work"})})]})]})})]})]})},M=n(151),R=n(162),N=n(167),q=n(156),J=n(149),W=n(163),K=n(65),Q=n(164),D=function(e){var t=e.defaultValue,n=e.onSearchSubmit,r=Object(a.useState)(""),i=Object(p.a)(r,2),o=i[0],c=i[1];Object(a.useEffect)((function(){c(t)}),[t]);return Object(f.jsx)(W.a,{marginBottom:"medium",children:Object(f.jsx)(Q.a,{value:o,onChange:function(e){c(e.target.value)},onSubmit:function(){n(o)}})})},G=n(43),Y=n.n(G),X=n(51),Z=n(58);function $(e,t){return ee.apply(this,arguments)}function ee(){return(ee=Object(X.a)(Y.a.mark((function e(t,n){var r,a,i,o;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("").concat(t,"?").concat(n));case 2:if((r=e.sent).ok){e.next=11;break}return e.next=6,r.json();case 6:throw a=e.sent,i=a.message,(o=new Error(i)).status=r.status,o;case 11:return e.abrupt("return",r.json());case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(){var e=S(),t=new URLSearchParams({context:e}).toString(),n=Object(Z.a)(e?["/api/users/role",t]:null,$);return{data:n.data,error:n.error}}function ne(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=S(),a=new URLSearchParams({context:r,page:String(e),limit:String(t),search:n}).toString(),i=Object(Z.a)(r?["/api/users",a]:null,$),o=i.data,c=i.error;return{users:null===o||void 0===o?void 0:o.data,pagination:null===o||void 0===o?void 0:o.pagination,isLoading:!o&&!c,error:c}}function re(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=S(),a=new URLSearchParams({context:r,page:String(e),limit:String(t),like:n}).toString(),i=Object(Z.a)(r?["/api/variants",a]:null,$),o=i.data,c=i.error,s=i.mutate;return{variants:null===o||void 0===o?void 0:o.data,meta:null===o||void 0===o?void 0:o.meta,isLoading:!o&&!c,error:c,mutate:s}}var ae=n(44),ie=n(165),oe=n(158),ce=n(152),se=n(155),le=n(166),ue=function(){var e=Object(X.a)(Y.a.mark((function e(t,n,r){var a,i,o,c;return Y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("").concat(t),{method:n,headers:{"Content-Type":"application/json"},body:r?JSON.stringify(r):null});case 2:if((a=e.sent).ok){e.next=11;break}return e.next=6,a.json();case 6:throw i=e.sent,o=i.message,(c=new Error(o)).status=a.status,c;case 11:return e.abrupt("return",a.json().catch((function(){})));case 12:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var de=function(e){var t=e.id,n=e.sku,r=e.productId,i=e.trackingType,o=e.inventoryCount,c=e.context,s=e.closeModal,l=e.onSuccess,u=Object(a.useState)(o),d=Object(p.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(i),m=Object(p.a)(b,2),O=m[0],g=m[1],x=Object(a.useState)(!1),v=Object(p.a)(x,2),y=v[0],w=v[1],S=Object(a.useState)(!1),k=Object(p.a)(S,2),C=k[0],P=k[1];return Object(f.jsx)(ie.a,{actions:[{text:"Cancel",variant:"subtle",onClick:s},{text:"Save",onClick:function(){O!==i||j!==o?(w(!0),function(e,t,n,r,a){var i={variantId:e,productId:t,trackingType:n,inventoryCount:r};return ue("/api/variants?context=".concat(a),"PUT",i)}(t,r,O!==i?O:null,j,c).then((function(){w(!1),l(),s()})).catch((function(e){w(!1),P(!0)}))):s()}}],header:"Editing SKU: ".concat(n),isOpen:!0,onClose:s,closeOnEscKey:!0,closeOnClickOutside:!0,children:y?Object(f.jsx)(R.a,{justifyContent:"center",children:Object(f.jsx)(N.a,{children:Object(f.jsx)(q.a,{size:"medium"})})}):Object(f.jsxs)(oe.a,{marginBottom:"xSmall",children:[Object(f.jsxs)(ce.a,{children:[Object(f.jsx)(se.a,{label:"Inventory Count",value:j,min:0,max:1e6,maxLength:7,onCountChange:h,required:!0}),Object(f.jsx)(le.a,{filterable:!1,label:"Inventory Tracking Type",options:[{value:"product",content:"Product"},{value:"variant",content:"Variant"},{value:"none",content:"None"}],value:O,onOptionChange:g,required:!0})]}),C&&Object(f.jsx)(M.a,{type:"error",header:"Error",messages:[{text:"Failed to update the variant. Please try again."}]})]})})};var je=function(){return Object(f.jsxs)(F.a,{header:"Inventory",children:[Object(f.jsx)(T.i,{children:"You can see all of your store's variants here, sort them, and update the inventory level."}),Object(f.jsx)(he,{})]})},he=function(){var e,t,n=S(),r=te(),i=Object(a.useState)(1),o=Object(p.a)(i,2),s=o[0],l=o[1],u=Object(a.useState)(50),d=Object(p.a)(u,2),j=d[0],h=d[1],b=Object(a.useState)(""),m=Object(p.a)(b,2),O=m[0],g=m[1],x=re(s,j,O),v=x.variants,y=x.meta,w=x.isLoading,k=x.error,C=x.mutate,P=Object(a.useState)(v),I=Object(p.a)(P,2),E=I[0],L=I[1],A=Object(a.useState)(""),B=Object(p.a)(A,2),V=B[0],z=B[1],F=Object(a.useState)("ASC"),U=Object(p.a)(F,2),_=U[0],H=U[1],Q=null===E||void 0===E?void 0:E.sort((function(e,t){return"inventory_level"===V?"ASC"===_?e[V]-t[V]:t[V]-e[V]:"ASC"===_?e.sku.localeCompare(t.sku):t.sku.localeCompare(e.sku)}));return Object(a.useEffect)((function(){return L(v)}),[v]),n?w?Object(f.jsx)(R.a,{justifyContent:"center",children:Object(f.jsx)(N.a,{children:Object(f.jsx)(q.a,{size:"medium"})})}):r.error||k?Object(f.jsx)(M.a,{type:"error",header:"Error",messages:[{text:"Failed to authorize the request for the variants data. Please try reloading or reinstalling the app."}]}):(null===v||void 0===v?void 0:v.length)||w||O?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(D,{defaultValue:O,onSearchSubmit:function(e){return g(e)}}),Object(f.jsx)(J.a,{emptyComponent:Object(f.jsx)(W.a,{padding:"medium",children:Object(f.jsx)(T.i,{children:"No results!"})}),columns:[{header:"Product Name",hash:"product_name",render:function(e){return e.product_name},isSortable:!1},{header:"Tracking Type",hash:"inventory_tracking",render:function(e){return e.inventory_tracking},isSortable:!1},{header:"SKU",hash:"sku",render:function(e){return e.sku},isSortable:!0},{header:"Inventory Count",hash:"inventory_level",render:function(e){return e.inventory_level},isSortable:!0},{header:"Action",hideHeader:!0,hash:"action",render:function(e){var t=e.id,a=e.sku,i=e.product_id,o=e.inventory_tracking,s=e.inventory_level;return Object(f.jsx)(K.a,{variant:"subtle",onClick:function(){return function(e,t,n,r,a,i,o){var s={id:e,sku:t,productId:n,trackingType:r,inventoryCount:a,context:i,onSuccess:o},l=document.createElement("div");l.id="modal";var u=document.body.appendChild(l);c.a.render(Object(f.jsx)(de,Object(ae.a)({closeModal:function(){c.a.unmountComponentAtNode(u),u.remove()}},s)),u)}(t,a,i,o,s,n,C)},disabled:"viewer"===r.data.role,children:"Edit"})},isSortable:!1}],pagination:{currentPage:s,totalItems:null!==(e=null===(t=y.pagination)||void 0===t?void 0:t.total)&&void 0!==e?e:0,onPageChange:function(e){l(e),L(Q)},itemsPerPageOptions:[50,100,200,250],onItemsPerPageChange:function(e){l(1),h(e)},itemsPerPage:j},items:null!==E&&void 0!==E?E:[],stickyHeader:!0,sortable:{columnHash:V,direction:_,onSort:function(e,t){z(e),H(t),L(Q)}}}),s<(null===y||void 0===y?void 0:y.pagination.total_pages)&&Object(f.jsx)(be,{targetPage:s+1,limit:j})]}):Object(f.jsx)(M.a,{type:"error",header:"Error",messages:[{text:"There are no variants to display. This indicates a problem, please try reloading the app."}]}):Object(f.jsx)(M.a,{type:"error",header:"Error",messages:[{text:"Failed to authorize your session. Please try reloading the app."}]})};function be(e){return re(e.targetPage,e.limit),null}var pe=function(){return Object(f.jsxs)(F.a,{header:"Users",children:[Object(f.jsxs)(T.i,{children:["This is a list of users that are able to use this app on your store and their permissions. By default, when a user first loads the app after being given permissions, they will only have the ",Object(f.jsx)("strong",{children:"Viewer"})," role. If you want them to have ",Object(f.jsx)("strong",{children:"Admin"})," permissions, you must set that here."]}),Object(f.jsx)(me,{})]})},me=function(){var e,t=S(),n=te(),r=Object(a.useState)(1),i=Object(p.a)(r,2),o=i[0],c=i[1],s=Object(a.useState)(10),l=Object(p.a)(s,2),u=l[0],d=l[1],j=Object(a.useState)(""),h=Object(p.a)(j,2),b=h[0],m=h[1],O=ne(o,u,b),g=O.users,x=O.pagination,v=O.isLoading,y=O.error;return t?v?Object(f.jsx)(R.a,{justifyContent:"center",children:Object(f.jsx)(N.a,{children:Object(f.jsx)(q.a,{size:"medium"})})}):n.error||y?Object(f.jsx)(M.a,{type:"error",header:"Error",messages:[{text:"There was an error loading the users data. Please try again or reload the app."}]}):(null===g||void 0===g?void 0:g.length)||v||b?Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(D,{defaultValue:b,onSearchSubmit:function(e){return m(e)}}),Object(f.jsx)(J.a,{columns:[{header:"Email",hash:"email",render:function(e){return e.email}},{header:"Role",hash:"role",width:"200px",render:function(e){var r,a=e.role,i=e.userId;return Object(f.jsx)(Oe,{currentUserRole:null===(r=n.data)||void 0===r?void 0:r.role,role:a,userId:i,context:t})}},{header:"Last Login",hash:"lastLogin",render:function(e){var t=e.lastLogin;return new Date(1e3*t).toLocaleString()}}],pagination:{currentPage:o,totalItems:null!==(e=null===x||void 0===x?void 0:x.totalItems)&&void 0!==e?e:0,onPageChange:c,itemsPerPageOptions:[10,25,50,100],onItemsPerPageChange:function(e){c(1),d(e)},itemsPerPage:u},items:null!==g&&void 0!==g?g:[]}),o<(null===x||void 0===x?void 0:x.totalPages)&&Object(f.jsx)(ge,{targetPage:o+1,limit:u})]}):Object(f.jsx)(M.a,{type:"error",header:"Error",messages:[{text:"There are no users to display. This indicates a problem, please try reloading the app."}]}):Object(f.jsx)(M.a,{type:"error",header:"Error",messages:[{text:"Failed to authorize your session. Please try reloading the app."}]})},Oe=function(e){var t=e.userId,n=e.role,r=e.currentUserRole,i=e.context,o=Object(a.useState)(n),c=Object(p.a)(o,2),s=c[0],l=c[1];return Object(f.jsx)(le.a,{onOptionChange:function(e){(function(e,t,n){return ue("/api/users?context=".concat(n),"PUT",{userId:e,role:t})})(t,e,i).then((function(){return l(e)})).catch((function(e){console.log(e),l(n)}))},options:[{value:"admin",content:"Admin"},{value:"viewer",content:"Viewer"}],filterable:!1,value:s,placeholder:"owner"===n?"Owner":void 0,disabled:"owner"===n||"viewer"===r})};function ge(e){return ne(e.targetPage,e.limit),null}var xe=function(){return Object(f.jsx)(F.a,{header:"Not Found",children:Object(f.jsx)(T.i,{children:"Cannot find the page that you're looking for."})})},ve=[{name:"Getting Started",path:"/",icon:Object(f.jsx)(h.a,{}),element:Object(f.jsx)(U,{})},{name:"Inventory",path:"/inventory",icon:Object(f.jsx)(C,{}),element:Object(f.jsx)(je,{})},{name:"Users",path:"/users",icon:Object(f.jsx)(I,{}),element:Object(f.jsx)(pe,{})},{name:"Help",path:"/help",icon:Object(f.jsx)(b.a,{}),element:Object(f.jsx)(H,{})}];function fe(){return Object(f.jsxs)(d.a,{children:[Object(f.jsx)(z,{navRoutes:ve}),Object(f.jsx)(w,{children:Object(f.jsxs)(j.c,{children:[ve.map((function(e,t){var n=e.path,r=e.element;return Object(f.jsx)(j.a,{path:n,element:r},"route-".concat(t))})),Object(f.jsx)(j.a,{path:"*",element:Object(f.jsx)(xe,{})})]})})]})}n(107);var ye,we=Object(u.b)(ye||(ye=Object(r.a)(["\n  body {\n    height: 100%;\n    max-width: 1080px;\n    min-width: 800px;\n    margin: 2rem auto;\n    background-color: ",";\n  }\n\n  #root {\n    padding: 1em;\n  }\n\n  a {\n    color: ",";\n  }\n\n  a:hover {\n    color: ",";\n  }\n"])),(function(e){return e.theme.colors.secondary10}),(function(e){return e.theme.colors.primary}),(function(e){return e.theme.colors.primary30}));c.a.render(Object(f.jsx)(i.a.StrictMode,{children:Object(f.jsxs)(u.a,{theme:l.a,children:[Object(f.jsx)(s.a,{}),Object(f.jsx)(we,{}),Object(f.jsx)(fe,{})]})}),document.getElementById("root"))}},[[108,1,2]]]);
//# sourceMappingURL=main.9862c53d.chunk.js.map